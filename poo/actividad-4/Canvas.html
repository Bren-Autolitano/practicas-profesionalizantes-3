<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Canvas Rectángulo</title>
    <style>
        body 
        {
            width: 50%;
            height: 50%;
            border: 2px solid black;
            
        }
    </style>
</head>
<body>
<script>

let canvas = document.createElement('canvas');
canvas.width = 400;
canvas.height = 400;
document.body.appendChild(canvas);


let ctx = canvas.getContext('2d');

//definición de la clase Rectangulo
//con propiedades y metodos (incluyendo clear canvas)
//Encapsula el comportamiento propio del objeto
class Rectangulo {
    constructor(x, y, width, height, angle = 0) {
        this.x = x;
        this.y = y;
        this.width = width;
        this.height = height;
        this.angle = angle;
    }

    draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height); 
        ctx.save();
        ctx.translate(this.x, this.y);
        ctx.rotate(this.angle);
        ctx.fillStyle = 'lightblue';
        ctx.fillRect(-this.width / 2, -this.height / 2, this.width, this.height);
        // Draw the border (stroke)
        ctx.lineWidth = 3;              // Optional: border thickness
        ctx.strokeStyle = 'purple';      // Optional: border color
        ctx.strokeRect(-this.width / 2, -this.height / 2, this.width, this.height);
        ctx.restore();
    }


    rotate(deltaAngle) {
        this.angle += deltaAngle;
        this.draw();
    }

    move(dx, dy) {
        this.x += dx;
        this.y += dy;
        this.draw();
    }
}

// Clase que controla el rectángulo con el teclado
class RectangleController {
    constructor(rectangle) {
        this.rectangle = rectangle;
        this.speed = 5;
        this.rotationSpeed = 0.1;
        this.listenToKeys();
    }

    listenToKeys() {
        //Usa la funcion flecha porque hereda el "this" de la clase en la q esta
        //Es mas orientado a objetos que la funcion normal window.addEventListener('keydown', function (event) {} 
        window.addEventListener('keydown', (event) => {
            switch(event.key) {
                case 'ArrowUp':
                    this.rectangle.move(0, -this.speed);
                    console.log('Car moved up');
                    break;
                case 'ArrowDown':
                    this.rectangle.move(0, this.speed);
                    console.log('Car moved down');
                    break;
                case 'ArrowLeft':
                    this.rectangle.rotate(-this.rotationSpeed);
                    console.log('Car rotated left');
                    break;
                case 'ArrowRight':
                    this.rectangle.rotate(this.rotationSpeed);
                    console.log('Car rotated right');
                    break;
            }
        });
    }
}


function main() {
    const auto = new Rectangulo(330, 200, 100, 50); //coordenadas fijas porq empieza quieto
    auto.draw(); // El auto se dibuja y queda quieto
    new RectangleController(auto); // Se conecta al teclado
}


window.onload = main;

</script>
</body>
</html>

canvas.html
Displaying canvas.html.